\usepackage{float}
\usepackage{listings}
\usepackage[hang,bf,font=small]{caption}
\usepackage{framed}
\usepackage[section]{placeins}

% sort bib
\ExecuteBibliographyOptions{sorting=nyt, dashed=false}

\usepackage[dvipsnames,table]{xcolor}

\usepackage[T1]{fontenc}

\usepackage{pifont}

\allowdisplaybreaks

\usepackage[bottom]{footmisc}
% fancy headers/footers
\makeatletter
\usepackage{fancyhdr}
\setlength{\headheight}{15pt}
\lhead{\small\scshape\nouppercase\leftmark}
\chead{}
\rhead{\small\itshape \@author}
\lfoot{}
\cfoot{\thepage}
\rfoot{}
\renewcommand{\headrulewidth}{0.4pt}
\makeatother

\usepackage{amsmath, amsfonts,amssymb, amsthm}
\usepackage{siunitx}
\usepackage[boxruled,lined,linesnumbered,titlenumbered]{algorithm2e}

\usepackage{setspace}
\usepackage{changepage}
\usepackage[explicit]{titlesec}
\usepackage{aliascnt}

% Center floats by default
\makeatletter
\g@addto@macro\@floatboxreset{\centering}
\makeatother

\floatplacement{figure}{!htbp}
\floatplacement{table}{!htbp}

\makeatletter
\newcommand*{\FormatDigit}[1]{\textcolor{Blue}{#1}}
\lstset{numbers=left,
numberstyle=\ttfamily\small\lst@ifdisplaystyle\footnotesize\fi,
basicstyle=\ttfamily\small\lst@ifdisplaystyle\footnotesize\singlespacing\fi,
breaklines=true,
backgroundcolor=\color{gray!20},
frame=ltb,
framerule=0pt,
framexleftmargin=0.5em,
xleftmargin=20pt,
%xrightmargin=10pt,
%framesep=10pt,
captionpos=t,
abovecaptionskip={0.5em},
belowcaptionskip={0.5em},
aboveskip=0.5em,
showstringspaces=false,
identifierstyle=\color{black},
commentstyle={\color{OliveGreen!100}},
keywordstyle={\color{Orange}},
stringstyle=\color{Plum!80},
literate={0}{{\FormatDigit{0}}}{1}%
             {1}{{\FormatDigit{1}}}{1}%
             {2}{{\FormatDigit{2}}}{1}%
             {3}{{\FormatDigit{3}}}{1}%
             {4}{{\FormatDigit{4}}}{1}%
             {5}{{\FormatDigit{5}}}{1}%
             {6}{{\FormatDigit{6}}}{1}%
             {7}{{\FormatDigit{7}}}{1}%
             {8}{{\FormatDigit{8}}}{1}%
             {9}{{\FormatDigit{9}}}{1}%
             {.0}{{\FormatDigit{.0}}}{2}% Following is to ensure that only periods
             {.1}{{\FormatDigit{.1}}}{2}% followed by a digit are changed.
             {.2}{{\FormatDigit{.2}}}{2}%
             {.3}{{\FormatDigit{.3}}}{2}%
             {.4}{{\FormatDigit{.4}}}{2}%
             {.5}{{\FormatDigit{.5}}}{2}%
             {.6}{{\FormatDigit{.6}}}{2}%
             {.7}{{\FormatDigit{.7}}}{2}%
             {.8}{{\FormatDigit{.8}}}{2}%
             {.9}{{\FormatDigit{.9}}}{2}%
             %{,}{{\FormatDigit{,}}{1}% depends if you want the "," in color
             {\ }{{ }}{1}% handle the space
             ,
}
\makeatother

% define "none" language for lstlistings
\lstdefinelanguage{none}{
  identifierstyle=
}

\newgeometry{margin=1in}

\setlength\parindent{15pt}

\newtheoremstyle{plain}
{12pt}   % ABOVESPACE
{12pt}   % BELOWSPACE
{\itshape}  % BODYFONT
{0pt}       % INDENT (empty value is the same as 0pt)
{\bfseries} % HEADFONT
{.}         % HEADPUNCT
{5pt plus 1pt minus 1pt} % HEADSPACE
{}          % CUSTOM-HEAD-SPEC

\newtheoremstyle{definition}
{12pt}   % ABOVESPACE
{12pt}   % BELOWSPACE
{\normalfont}  % BODYFONT
{0pt}       % INDENT (empty value is the same as 0pt)
{\bfseries} % HEADFONT
{.}         % HEADPUNCT
{5pt plus 1pt minus 1pt} % HEADSPACE
{}          % CUSTOM-HEAD-SPEC

\newtheoremstyle{remark}
{12pt}   % ABOVESPACE
{12pt}   % BELOWSPACE
{\normalfont}  % BODYFONT
{0pt}       % INDENT (empty value is the same as 0pt)
{\itshape} % HEADFONT
{.}         % HEADPUNCT
{5pt plus 1pt minus 1pt} % HEADSPACE
{}          % CUSTOM-HEAD-SPEC

\theoremstyle{plain}

% define theorem
\newtheorem{theorem}{Theorem}[section]
\providecommand*{\theoremautorefname}{Theorem}

% define lemma
\newtheorem{lemma}{Lemma}[section]
\providecommand*{\lemmaautorefname}{Lemma}

% define claim
\newtheorem{claim}{Claim}[section]
\providecommand*{\claimautorefname}{Claim}

% define corollary
\newtheorem{corollary}{Corollary}[section]
\providecommand*{\corollaryautorefname}{Corollary}

% define proposition
\newtheorem{proposition}{Proposition}[section]
\providecommand*{\propositionautorefname}{Proposition}

% define conjecture
\newtheorem{conjecture}{Conjecture}[section]
\providecommand*{\conjectureautorefname}{Conjecture}

\theoremstyle{remark}

% define observation
\newtheorem{observation}{Observation}[section]
\providecommand*{\observationautorefname}{Observation}

% define remark
\newtheorem{remark}{Remark}[section]
\providecommand*{\remarkautorefname}{Remark}

\theoremstyle{definition}

% define example
\newtheorem{example}{Example}[section]
\providecommand*{\exampleautorefname}{Example}

% define definition
\newtheorem{definition}{Definition}[section]
\providecommand*{\definitionautorefname}{Definition}

\let\oldforall\forall
\let\forall\undefined
\DeclareMathOperator{\forall}{\oldforall}

\let\oldexists\exists
\let\exists\undefined
\DeclareMathOperator{\exists}{\oldexists}

\newcommand{\abs}[1]{\ensuremath{\lvert #1 \rvert}}
\newcommand{\blackbox}{\hfill$\blacksquare$}
\usepackage{tikz}
\newcommand*\circled[1]{\tikz[baseline=(char.base)]{
          \node[shape=circle,draw,inner sep=2pt] (char) {#1};}}

\renewcommand{\labelitemi}{\raisebox{.05ex}\textbullet}
\renewcommand{\labelitemii}{\raisebox{.25ex}{$\scriptscriptstyle \blacktriangleright$}}
\renewcommand{\labelitemiii}{\raisebox{.05ex}\textopenbullet}
\renewcommand{\labelitemiv}{\raisebox{.25ex}{$\scriptscriptstyle \vartriangleright$}}

\titlespacing*{\paragraph}{0pt}{1.3em}{1em}
\titlespacing*{\subparagraph}{0pt}{1.3em}{1em}

\titleformat{\paragraph} % command to change
[runin]                  % shape  (runin, etc.)
{\normalfont\bfseries\color{gray!110}}              % format (bfseries, itshape, etc.)
{}                       % label  (thesection, thesubsection, etc.)
{0em}                    % separation between label and body
{#1}                     % before the body
[.]                      % after the body

\titleformat{\subparagraph} % command to change
[runin]                     % shape  (runin, etc.)
{\normalfont\itshape\color{gray!110}}                  % format (bfseries, itshape, etc.)
{}                          % label  (thesection, thesubsection, etc.)
{0em}                       % separation between label and body
{#1}                        % before the body
[.]                         % after the body

\let\lil\lstinputlisting
\usepackage{afterpage}
\hypersetup{colorlinks, allcolors=., urlcolor=blue}

\usepackage{etoolbox}% http://ctan.org/pkg/etoolbox
\makeatletter
\patchcmd{\lst@GLI@}% <command>
{\def\lst@firstline{#1\relax}}% <search>
{\def\lst@firstline{#1\relax}\def\lst@firstnumber{#1\relax}}% <replace>
{\typeout{listings firstnumber=firstline}}% <success>
{\typeout{listings firstnumber not set}}% <failure>
\makeatother

\renewcommand\lstlistlistingname{List of Listings}
\usepackage{chngcntr}
\counterwithin{figure}{section}
\counterwithin{table}{section}

\definecolor{codebg}{rgb} {128,128,128}

\usepackage{booktabs}
\usepackage{longtable}
\usepackage{array}
\usepackage{multirow}
\usepackage{wrapfig}
\usepackage{float}
\usepackage{colortbl}
\usepackage{pdflscape}
\usepackage{tabu}
\usepackage{threeparttable}
\usepackage{threeparttablex}
\usepackage[normalem]{ulem}
\usepackage{makecell}

\renewcommand{\sectionautorefname}{Section}
\renewcommand{\subsectionautorefname}{Subsection}
\renewcommand{\subsubsectionautorefname}{Subsection}
\renewcommand{\paragraphautorefname}{}
\renewcommand{\subparagraphautorefname}{}

\usepackage{nameref}

\makeatletter
\renewcommand{\theparagraph}{\bfseries \@currentlabelname}
\renewcommand{\thesubparagraph}{\itshape \@currentlabelname}
\makeatother

\usepackage{enumitem}
\setitemize{itemsep=0em}

\usepackage[final]{pdfpages}
\usepackage{lipsum}

\let\oldmaketitle\maketitle
\renewcommand{\maketitle}{\relax}

\newcommand{\appendixnumberline}[1]{Appendix\space}

\let\oldappendix\appendix
\makeatletter
\renewcommand{\appendix}{%
  \addtocontents{toc}{\let\protect\numberline\protect\appendixnumberline}%
  \renewcommand{\@seccntformat}[1]{Appendix~\csname the##1\endcsname\quad}%
  \oldappendix
}
\makeatother
